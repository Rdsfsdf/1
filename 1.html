<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <style>
        body { margin: 0; padding: 0; overflow: hidden; background: #000; font-family: 'Verdana', sans-serif; color: white; }

        /* Фоновое изображение с плавной сменой */
        #bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-size: cover; background-position: center;
            z-index: 1; transition: background-image 1.5s ease-in-out;
        }

        /* Черная заглушка внизу для скрытия серого окна GMod */
        .gmod-blocker {
            position: fixed; bottom: 0; left: 0; width: 100%; height: 140px;
            background: #000; z-index: 9990;
        }

        /* Интерфейс поверх всего */
        .ui {
            position: absolute; bottom: 40px; left: 50px; right: 50px;
            z-index: 9999; display: flex; justify-content: space-between; align-items: flex-end;
        }

        .left-side { text-transform: uppercase; text-shadow: 2px 2px 5px #000; }
        .right-side { width: 350px; text-align: right; }
        .bar-bg { width: 100%; height: 4px; background: rgba(255,255,255,0.1); margin-bottom: 8px; }
        #bar-inner { width: 0%; height: 100%; background: #fff; box-shadow: 0 0 15px #fff; transition: 0.4s; }
    </style>
</head>
<body>
    <div id="bg"></div>
    <div class="gmod-blocker"></div>

    <div class="ui">
        <div class="left-side">
            <div id="status" style="font-size: 14px; opacity: 0.6;">Подключение...</div>
            <div id="map" style="font-size: 20px; margin: 5px 0;">Карта: -</div>
            <div id="players">Игроков: 0 / 0</div>
        </div>
        <div class="right-side">
            <div class="bar-bg"><div id="bar-inner"></div></div>
            <div id="percentage" style="font-size: 24px; font-weight: bold;">0%</div>
        </div>
    </div>

    <script>
        // АНАЛОГ var l_bgImages из твоей инструкции
        var images = [
            "https://imgur.com/Ogvr8wQ.png", // Твоя текущая картинка
            "https://i.imgur.com/ССЫЛКА_2.jpg", // Добавь свои ссылки сюда
            "https://i.imgur.com/ССЫЛКА_3.jpg"
        ];
        
        var currentImg = 0;
        function changeBG() {
            document.getElementById('bg').style.backgroundImage = "url('" + images[currentImg] + "')";
            currentImg = (currentImg + 1) % images.length;
        }
        setInterval(changeBG, 5000); // Смена каждые 5 секунд
        changeBG();

        // СВЯЗЬ С СЕРВЕРОМ 176.120.179.233:27015
        var serverIP = "176.120.179.233:27015";
        function updateOnline() {
            fetch(`https://api.gmod.su/server/${serverIP}`)
                .then(r => r.json()).then(data => {
                    if (data && data.status === "success") {
                        document.getElementById("players").innerHTML = "ИГРОКОВ: " + data.players + " / " + data.max_players;
                    }
                }).catch(e => console.log("API Error"));
        }
        updateOnline();
        setInterval(updateOnline, 15000);

        // ФУНКЦИИ GMOD
        var totalFiles = 0;
        function GameDetails(servername, serverurl, mapname, maxplayers) {
            document.getElementById("map").innerHTML = "КАРТА: " + mapname;
        }
        function SetStatusChanged(s) { document.getElementById("status").innerHTML = s; }
        function SetFilesTotal(t) { totalFiles = t; }
        function SetFilesNeeded(n) {
            if (totalFiles > 0) {
                var p = Math.floor(((totalFiles - n) / totalFiles) * 100);
                document.getElementById("bar-inner").style.width = p + "%";
                document.getElementById("percentage").innerHTML = p + "%";
            }
        }
    </script>
</body>
</html>
